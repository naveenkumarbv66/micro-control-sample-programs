DATA SEGMENT
KEYS DB '0123456789ABCDEFGHIJKLMNO'
MSG1 DB 0AH,0DH,'THE ROW NUMBER IS:$'
ROW DB ?
MSG2 DB 0AH,0DH,'THE COLUMN NUMBER IS:$'
COL DB ?
DATA ENDS

CODE SEGMENT
ASSUME CS:CODE,DS:DATA
START:
MOV AX,DATA
MOV DS,AX
MOV AL,90H
MOV DX,0C803H
OUT DX,AL

SCANC1:
MOV DX,0C802H
MOV AL,01
OUT DX,AL
MOV DX,0C800H
IN AL,DX
CMP AL,00
JNZ COL1

SCANC2:
MOV DX,0C802H
MOV AL,02
OUT DX,AL
MOV DX,0C800H
IN AL,DX
CMP AL,00
JNZ COL2

SCANC3:
MOV DX,0C802H
MOV AL,04
OUT DX,AL
MOV DX,0C800H
IN AL,DX
CMP AL,00
JNZ COL3
JMP SCANC1

COL1:
CALL DELAY
MOV COL,31H
MOV CL,30H
LEA SI,KEYS


L1:
SHR AL,01
JC DISP
INC SI
INC CL
JMP L1

COL2:
CALL DELAY
MOV COL,32H
MOV CL,30H
LEA SI,KEYS

ADD SI,08H

L2:
SHR AL,01
JC DISP
INC SI
INC CL
JMP L2

COL3:
CALL DELAY
MOV COL,33H
MOV CL,30H
LEA SI,KEYS

ADD SI,10H

L3:
SHR AL,01
JC DISP
INC SI
INC CL
JMP L3
DISP:
MOV DL,[SI]
MOV AH,02
INT 21H
MOV ROW,CL
LEA DX,MSG1
MOV AH,09
INT 21H
MOV DL,ROW
MOV AH,02
INT 21H
LEA DX,MSG2
MOV AH,09H
INT 21H
MOV DL,COL
MOV AH,02
INT 21H
MOV AH,4CH
INT 21H
DELAY PROC NEAR
PUSH AX
PUSH CX
PUSH DX
MOV CX,20
L5:
MOV AX,0FFFFH
L4:
DEC AX
JNZ L4
LOOP L5
POP DX
POP CX
POP AX
RET
DELAY ENDP
CODE ENDS
END START

